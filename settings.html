<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Equipment Control Panel</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container settings-container">
        <div class="header-container">
            <h1 data-i18n="configurationSettings">Configuration Settings</h1>
            <div class="header-actions">
                <button class="btn-settings" id="language-toggle-btn" title="Toggle Language">
                    <span id="language-text">EN</span>
                    <span data-i18n="language">Language</span>
                </button>
                <button class="btn-settings" id="theme-toggle-btn" title="Toggle Theme">
                    <svg width="16" height="16" viewBox="0 0 16 16" id="theme-icon">
                        <!-- Moon icon (for dark mode) -->
                        <path id="moon-icon" d="M8 2a6 6 0 1 0 6 6 7 7 0 0 1-6-6z" fill="currentColor"/>
                        <!-- Sun icon (for bright mode) -->
                        <g id="sun-icon" style="display: none;">
                            <circle cx="8" cy="8" r="3" fill="currentColor"/>
                            <line x1="8" y1="1" x2="8" y2="3" stroke="currentColor" stroke-width="1.5"/>
                            <line x1="8" y1="13" x2="8" y2="15" stroke="currentColor" stroke-width="1.5"/>
                            <line x1="1" y1="8" x2="3" y2="8" stroke="currentColor" stroke-width="1.5"/>
                            <line x1="13" y1="8" x2="15" y2="8" stroke="currentColor" stroke-width="1.5"/>
                            <line x1="3" y1="3" x2="4.5" y2="4.5" stroke="currentColor" stroke-width="1.5"/>
                            <line x1="11.5" y1="11.5" x2="13" y2="13" stroke="currentColor" stroke-width="1.5"/>
                            <line x1="13" y1="3" x2="11.5" y2="4.5" stroke="currentColor" stroke-width="1.5"/>
                            <line x1="4.5" y1="11.5" x2="3" y2="13" stroke="currentColor" stroke-width="1.5"/>
                        </g>
                    </svg>
                    <span data-i18n="theme">Theme</span>
                </button>
            </div>
        </div>

        <!-- Connection Section -->
        <div class="section connection-section">
            <h2 data-i18n="connectionSettings">Connection Settings</h2>

            <!-- Protocol Selection -->
            <div class="protocol-selector">
                <label data-i18n="protocol">Protocol:</label>
                <div class="protocol-options">
                    <label class="protocol-option">
                        <input type="radio" name="protocol" value="tcp" id="protocol-tcp" checked>
                        <span class="protocol-label" data-i18n="tcp">TCP</span>
                    </label>
                    <label class="protocol-option">
                        <input type="radio" name="protocol" value="udp" id="protocol-udp">
                        <span class="protocol-label" data-i18n="udp">UDP</span>
                    </label>
                </div>
            </div>

            <!-- TCP Settings -->
            <div id="tcp-settings" class="protocol-settings-panel">
                <h3 data-i18n="tcpSettings">TCP Settings</h3>
                <div class="settings-grid">
                    <div class="input-group">
                        <label for="tcp-host" data-i18n="tcpHost">TCP Host:</label>
                        <input type="text" id="tcp-host" value="localhost" placeholder="localhost">
                    </div>
                    <div class="input-group">
                        <label for="tcp-port" data-i18n="tcpServerPort">TCP Server Port:</label>
                        <input type="number" id="tcp-port" value="8080" placeholder="8080">
                    </div>
                    <div class="input-group">
                        <label for="tcp-client-port" data-i18n="tcpClientPort">TCP Client Port:</label>
                        <input type="number" id="tcp-client-port" value="0" placeholder="0" min="0" max="65535">
                    </div>
                </div>
            </div>

            <!-- UDP Settings -->
            <div id="udp-settings" class="protocol-settings-panel" style="display: none;">
                <h3 data-i18n="udpSettings">UDP Settings</h3>
                <div class="settings-grid">
                    <div class="input-group">
                        <label for="udp-listening-port" data-i18n="udpListeningPort">UDP Listening Port:</label>
                        <input type="number" id="udp-listening-port" value="8081" placeholder="8081" min="0" max="65535">
                    </div>
                    <div class="input-group">
                        <label for="udp-target-host" data-i18n="udpTargetHost">UDP Target Host:</label>
                        <input type="text" id="udp-target-host" value="localhost" placeholder="localhost">
                    </div>
                    <div class="input-group">
                        <label for="udp-target-port" data-i18n="udpTargetPort">UDP Target Port:</label>
                        <input type="number" id="udp-target-port" value="8080" placeholder="8080" min="0" max="65535">
                    </div>
                </div>
            </div>

            <!-- Connection Controls -->
            <div class="connection-actions">
                <div class="connection-buttons">
                    <button id="connect-btn" class="btn btn-primary" data-i18n="connect">Connect</button>
                    <button id="disconnect-btn" class="btn btn-secondary" data-i18n="disconnect" disabled>Disconnect</button>
                </div>
                <span id="status-indicator" class="status-disconnected" data-i18n="disconnected">Disconnected</span>
                <div class="auto-send-group">
                    <label class="auto-send-label">
                        <input type="checkbox" id="auto-send-toggle">
                        <span data-i18n="autoSend">Auto-Send</span>
                    </label>
                    <div class="latency-input-group">
                        <input type="number" id="send-latency" class="latency-input" value="20" min="1" max="10000" placeholder="20">
                        <span class="unit-label">ms</span>
                    </div>
                    <span class="auto-send-indicator" id="auto-send-indicator" data-i18n="off">OFF</span>
                </div>
                <div class="auto-send-group">
                    <label class="auto-send-label">
                        <input type="checkbox" id="debug-mode-toggle">
                        <span data-i18n="debugEcho">Debug Echo</span>
                    </label>
                    <span class="auto-send-indicator" id="debug-mode-indicator" data-i18n="off">OFF</span>
                </div>
            </div>
        </div>

        <!-- Control Parameters Section -->
        <div class="section send-section">
            <h2 data-i18n="controlParameters">Control Parameters</h2>
            <div class="control-layout">
                <!-- Speed Control -->
                <div class="control-group">
                    <h3 data-i18n="speedControl">Speed Control</h3>
                    <div class="integer-input">
                        <label for="int-0" data-i18n="speedMode">Speed Mode:</label>
                        <select id="int-0" class="speed-mode-select">
                            <option value="0" data-i18n="speedModeLow">Low Speed (Preset)</option>
                            <option value="1" data-i18n="speedModeMed">Med Speed (Preset)</option>
                            <option value="2" data-i18n="speedModeHigh">High Speed (Preset)</option>
                            <option value="3" data-i18n="speedModeCustom2D">Custom 2D Speed</option>
                            <option value="4" data-i18n="speedModeCustomForce">Custom Force Speed</option>
                        </select>
                    </div>
                    <div class="integer-input">
                        <label for="int-1" id="target-speed-label" data-i18n="targetSpeed">Target Speed:</label>
                        <input type="number" id="int-1" value="15" min="0" max="65535" disabled>
                        <span class="unit-hint" data-i18n="unitMmS">mm/s</span>
                    </div>
                    <span class="preset-note" id="speed-preset-note" data-i18n="speedPresetNote">(Preset - Target Speed ignored)</span>
                </div>


                <!-- Operation Mode -->
                <div class="control-group">
                    <h3 data-i18n="operationSettings">Operation Settings</h3>
                    <div class="integer-input">
                        <label for="int-5" data-i18n="operationMode">Operation Mode:</label>
                        <input type="number" id="int-5" value="0" min="0" max="65535">
                        <span class="unit-hint" data-i18n="pidParameter">PID Set</span>
                    </div>
                    <div class="integer-input">
                        <label for="tension-input-n" data-i18n="targetTension">Target Tension:</label>
                        <input type="number" id="tension-input-n" value="0" min="0" max="655.35" step="0.01">
                        <span class="unit-hint" data-i18n="unitN">N</span>
                        <input type="hidden" id="int-6" value="0">
                    </div>
                    <div class="integer-input">
                        <label for="int-7"><span data-i18n="reserved">Reserved</span> 7:</label>
                        <input type="number" id="int-7" value="0" min="0" max="65535">
                    </div>
                </div>

                <!-- Communication & Control -->
                <div class="control-group">
                    <h3 data-i18n="communicationControl">Communication & Control</h3>
                    <div class="integer-input">
                        <label for="int-8" data-i18n="commFlag">Comm Flag:</label>
                        <input type="number" id="int-8" value="1234" min="0" max="65535">
                        <span class="unit-hint" data-i18n="unitStatus">Status</span>
                    </div>
                    <div class="integer-input">
                        <label for="int-9" data-i18n="controlCommand">Control Command:</label>
                        <input type="number" id="int-9" value="0" min="0" max="65535" readonly>
                        <span class="unit-hint" data-i18n="unitCmdId">Cmd ID</span>
                    </div>
                </div>

                <!-- Reserved Parameters -->
                <div class="control-group">
                    <h3 data-i18n="reserved">Reserved</h3>
                    <div class="reserved-params-grid">
                        <div class="integer-input compact">
                            <label for="int-10">10:</label>
                            <input type="number" id="int-10" value="0" min="0" max="65535">
                        </div>
                        <div class="integer-input compact">
                            <label for="int-11">11:</label>
                            <input type="number" id="int-11" value="0" min="0" max="65535">
                        </div>
                        <div class="integer-input compact">
                            <label for="int-12">12:</label>
                            <input type="number" id="int-12" value="0" min="0" max="65535">
                        </div>
                        <div class="integer-input compact">
                            <label for="int-13">13:</label>
                            <input type="number" id="int-13" value="0" min="0" max="65535">
                        </div>
                        <div class="integer-input compact">
                            <label for="int-14">14:</label>
                            <input type="number" id="int-14" value="0" min="0" max="65535">
                        </div>
                        <div class="integer-input compact">
                            <label for="int-15">15:</label>
                            <input type="number" id="int-15" value="0" min="0" max="65535">
                        </div>
                    </div>
                </div>
            </div>
            <button id="send-btn" class="btn btn-debug" disabled data-i18n="sendDataDebug">Send Data (Debug)</button>
        </div>
    </div>

    <script src="locales.js"></script>
    <script src="language-manager.js"></script>
    <script src="theme-manager.js"></script>
    <script type="module" src="renderer.js"></script>
</body>
</html>
