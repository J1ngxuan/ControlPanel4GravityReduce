<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equipment Control Panel</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Custom Titlebar -->
    <div class="titlebar">
        <div class="titlebar-drag-region">
            <div class="titlebar-title">Equipment Control Panel</div>
        </div>
        <div class="titlebar-controls">
            <button class="titlebar-button" id="min-btn" title="Minimize">
                <svg width="12" height="12" viewBox="0 0 12 12">
                    <rect x="0" y="5" width="12" height="2" fill="currentColor"/>
                </svg>
            </button>
            <button class="titlebar-button" id="max-btn" title="Maximize">
                <svg width="12" height="12" viewBox="0 0 12 12">
                    <rect x="1" y="1" width="10" height="10" stroke="currentColor" stroke-width="1.5" fill="none"/>
                </svg>
            </button>
            <button class="titlebar-button titlebar-close" id="close-btn" title="Close">
                <svg width="12" height="12" viewBox="0 0 12 12">
                    <line x1="1" y1="1" x2="11" y2="11" stroke="currentColor" stroke-width="1.5"/>
                    <line x1="11" y1="1" x2="1" y2="11" stroke="currentColor" stroke-width="1.5"/>
                </svg>
            </button>
        </div>
    </div>

    <div class="container">
        <!-- Connection Status Bar -->
        <div class="status-bar">
            <span class="status-label">Connection:</span>
            <span id="status-indicator" class="status-disconnected">Disconnected</span>
            <div class="auto-send-controls">
                <label>
                    <input type="checkbox" id="auto-send-toggle">
                    <span class="status-label">Auto-Send (50Hz)</span>
                </label>
                <span id="auto-send-indicator" class="auto-send-indicator">OFF</span>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-button active" data-tab="commands">Control Commands</button>
            <button class="tab-button" data-tab="monitor">Monitor</button>
            <button id="settings-btn" class="btn-settings" title="Settings">⚙️ Settings</button>
        </div>

        <!-- Tab Content -->

        <!-- Tab 1: Control Commands -->
        <div class="tab-content active" id="tab-commands">
        <div class="section commands-section">
            <h2>Control Commands</h2>
            <p class="current-command-display">Current Command: <span id="current-cmd-display">0 - None</span></p>

            <!-- System Control -->
            <div class="command-group">
                <h3>System Control</h3>
                <div class="commands-grid-group">
                    <button class="btn btn-command" data-cmd="0" data-name="Direct Response" disabled>Direct Response</button>
                    <button class="btn btn-command btn-start" data-cmd="1" data-name="Start Experiment" disabled>Start Experiment</button>
                    <button class="btn btn-command btn-stop" data-cmd="2" data-name="Stop Experiment" disabled>Stop Experiment</button>
                    <button class="btn btn-command" data-cmd="30" data-name="Clear Faults" disabled>Clear Faults</button>
                </div>
            </div>

            <!-- Power Control -->
            <div class="command-group">
                <h3>Power & Servo Control</h3>
                <div class="commands-grid-group">
                    <button class="btn btn-command" data-cmd="3" data-name="Driver Power ON" disabled>Driver Power ON</button>
                    <button class="btn btn-command" data-cmd="4" data-name="Driver Power OFF" disabled>Driver Power OFF</button>
                    <button class="btn btn-command" data-cmd="5" data-name="Servo Module ON" disabled>Servo Module ON</button>
                    <button class="btn btn-command" data-cmd="6" data-name="Servo Module OFF" disabled>Servo Module OFF</button>
                </div>
            </div>

            <!-- Axis Movement -->
            <div class="command-group">
                <h3>Axis Movement</h3>
                <div class="axis-control-warning">
                    <span class="warning-icon">⚠️</span>
                    <span>Only one axis control can be active at a time</span>
                </div>
                <div class="axis-controls-container">
                    <!-- XY Joystick Control -->
                    <div class="joystick-container">
                        <h4>X/Y Axis Control</h4>
                        <div class="joystick-wrapper">
                            <canvas id="joystick-canvas" width="200" height="200"></canvas>
                            <div class="joystick-labels">
                                <span class="label-top">Y+</span>
                                <span class="label-right">X+</span>
                                <span class="label-bottom">Y-</span>
                                <span class="label-left">X-</span>
                            </div>
                        </div>
                        <div class="joystick-status">
                            <span id="joystick-status">Inactive</span>
                        </div>
                    </div>

                    <!-- Z Axis Slider Control -->
                    <div class="slider-container">
                        <h4>Z Axis Control</h4>
                        <div class="slider-wrapper">
                            <div class="slider-label-top">Z+</div>
                            <input type="range" id="z-slider" class="z-slider" min="-1" max="1" value="0" step="1" orient="vertical" disabled>
                            <div class="slider-label-bottom">Z-</div>
                        </div>
                        <div class="slider-status">
                            <span id="slider-status">Inactive</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Position & Special Functions -->
            <div class="command-group">
                <h3>Position & Special Functions</h3>
                <div class="commands-grid-group">
                    <button class="btn btn-command" data-cmd="20" data-name="XY Position Move" disabled>XY Position Move</button>
                    <button class="btn btn-command" data-cmd="21" data-name="Precision Align" disabled>Precision Align</button>
                    <button class="btn btn-command" data-cmd="22" data-name="Tension Setting" disabled>Tension Setting</button>
                </div>
            </div>

            <!-- Emergency Stops -->
            <div class="command-group">
                <h3>Emergency Stops</h3>
                <div class="commands-grid-group">
                    <button class="btn btn-command" data-cmd="18" data-name="Stop Z-axis" disabled>Stop Z-axis</button>
                    <button class="btn btn-command btn-emergency" data-cmd="19" data-name="STOP XYZ" disabled>STOP XYZ</button>
                    <button class="btn btn-command btn-emergency" data-cmd="23" data-name="Emergency Stop" disabled>Emergency Stop + Clear Pulse</button>
                </div>
            </div>
        </div>
        </div>

        <!-- Tab 3: Monitor -->
        <div class="tab-content" id="tab-monitor">
        <!-- Status Monitoring Section -->
        <div class="section receive-section">
            <h2>Status Monitoring</h2>

            <!-- 40 Boolean Status Indicators -->
            <div class="subsection">
                <h3>System Status Indicators (40 Boolean Values)</h3>
                <div id="bool-display" class="bool-grid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- 10 Integer Status Values -->
            <div class="subsection">
                <h3>Status Values (10 Integers)</h3>
                <div id="int-display" class="int-display-grid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Log Section -->
        <div class="section log-section">
            <h2>Log</h2>
            <div id="log" class="log-container"></div>
        </div>
        </div>
        <!-- End of Tab 3 -->
    </div>

    <script src="renderer.js"></script>
</body>
</html>
